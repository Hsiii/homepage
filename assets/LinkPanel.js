import{r as k,l as y,a as w,j as n,B as E}from"./index.js";const M=(s,c,a)=>{const[e,t]=k.useState(0),[f,u]=k.useState(a);a!==f&&(u(a),t(a||0));const[l,r]=k.useState(!1),[v,i]=k.useState(!1),[d,o]=k.useState(s);return s!==d&&(o(s),s&&(r(!1),i(!1),t(0))),k.useEffect(()=>{const h=()=>{r(!1),t(0)},g=x=>{const m=x.code.slice(-1);if(!l){m==="1"&&!s&&(r(!0),i(!1));return}if(x.key==="Escape"){if(e){t(0);return}r(!1);return}if(!/^[1-9]$/.test(m))return;const j=parseInt(m);if(!(j>y.length)){if(!e){t(j);return}window.location.href=w[y[e-1].links[j-1]]}};return window.addEventListener("keydown",g),window.addEventListener("click",h),()=>{window.removeEventListener("keydown",g),window.removeEventListener("click",h)}},[l,v,e,s]),{selectedCategory:e,setSelectedCategory:t,isKeyboardNav:l,isMouseNav:v,startMouseNav:()=>{i(!0),r(!1),t(0),c()},endMouseNav:()=>{i(!1)}}},H=({as:s="div",className:c="",children:a,icon:e,hotkey:t,isHotkeyHidden:f=!1,modifiers:u=[],...l})=>{const r=u.filter(Boolean).join(" "),v=`${c} ${r}`.trim();return n.jsxs(s,{className:v,...l,children:[e&&e,n.jsxs("code",{className:`hint ${f?"hidden":""}`,children:["[",t,"]"]}),n.jsx("span",{children:a})]})},L=({categoryData:s,index:c,selectedCategory:a,isMouseNav:e,keyboardNavEnabled:t,padding:f,highlightedLink:u})=>{const l=a===c+1,r=e||a!==0||c+1>9||!t,v=[l&&"selected",e&&"hoverEffective"];return n.jsxs(k.Fragment,{children:[n.jsx(H,{className:"category",icon:s.icon,hotkey:c+1,isHotkeyHidden:r,modifiers:v,children:s.category}),n.jsxs("div",{className:`links ${e?"hoverEffective":""}`,style:{"--padding":f},children:[n.jsx("div",{className:"panel"}),s.links.map((i,d)=>{const o=!(i in w),p=u===i,N=e||a===0||d+1>9||o||!t,h=[o&&"disabled",e&&"hoverEffective",p&&"highlighted"];return n.jsx(H,{as:"a",id:i,href:w[i],className:"link",hotkey:d+1,isHotkeyHidden:N,modifiers:h,children:i},i)})]})]})},C=({hidden:s,isSearchNav:c,highlightedLink:a,highlightedCategory:e,onClearSearch:t})=>{const{selectedCategory:f,isKeyboardNav:u,isMouseNav:l,startMouseNav:r,endMouseNav:v}=M(c,t,e),i=k.useMemo(()=>{const d=window.innerHeight,o=16,p=3.5*o;return y.map((N,h)=>{const g=d/2+(h+1-y.length/2-.5)*p,x=N.links.length*p;let m;return m=g+x/2<=d-o?g-x/2:d-x-o,m<o&&(m=o),`${m}px`})},[]);return n.jsxs("nav",{className:`link-panel ${l?"hoverEffective":""}`,onMouseMove:r,onTouchStart:r,onMouseOut:v,"aria-hidden":s,"aria-expanded":u,children:[n.jsxs("div",{className:`trigger ${s&&"hidden"}`,children:[n.jsx("div",{className:"indicator"}),n.jsx(E,{className:"icon"})]}),n.jsxs("div",{className:`link-tree ${(u||f!==0)&&"expanded"}`,children:[n.jsx("div",{className:"panel"}),y.map((d,o)=>n.jsx(L,{categoryData:d,index:o,selectedCategory:f,isMouseNav:l,keyboardNavEnabled:!c,padding:i[o],highlightedLink:a},d.category))]})]})};export{C as LinkPanel};
