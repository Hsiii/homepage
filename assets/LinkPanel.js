import{r as f,l as p,a as E,j as n,B as M}from"./index.js";const b=(t,d,r)=>{const e=f.useRef(void 0),[a,i]=f.useState(0),[v,m]=f.useState(r);r!==v&&(m(r),i(r??0));const[u,c]=f.useState(!1),[l,s]=f.useState(!1),[o,k]=f.useState(t);return t!==o&&(k(t),t&&(c(!1),s(!1),i(0))),f.useEffect(()=>{const x=()=>{c(!1),i(0)},g=h=>{const j=h.code.slice(-1);if(!u){j==="1"&&!t&&(c(!0),s(!1));return}if(h.key==="Escape"){if(a>0){i(0);return}c(!1);return}if(!/^[1-9]$/.test(j))return;const H=Number.parseInt(j,10);if(!(H>p.length)){if(a===0){i(H);return}globalThis.location.href=E[p[a-1].links[H-1]]}};return globalThis.addEventListener("keydown",g),globalThis.addEventListener("click",x),()=>{globalThis.removeEventListener("keydown",g),globalThis.removeEventListener("click",x),e.current&&clearTimeout(e.current)}},[u,l,a,t]),{selectedCategory:a,setSelectedCategory:i,isKeyboardNav:u,isMouseNav:l,startMouseNav:()=>{e.current&&(clearTimeout(e.current),e.current=void 0),s(!0),c(!1),i(0),d()},endMouseNav:()=>{e.current=setTimeout(()=>{s(!1),e.current=void 0},150)}}},T=({as:t="div",className:d="",children:r,icon:e,hotkey:a,isHotkeyHidden:i=!1,modifiers:v=[],...m})=>{const u=v.filter(Boolean).join(" "),c=`${d} ${u}`.trim();return n.jsxs(t,{className:c,...m,children:[e&&e,n.jsxs("code",{className:`hint ${i?"hidden":""}`,children:["[",a,"]"]}),n.jsx("span",{children:r})]})},L=({categoryData:t,index:d,selectedCategory:r,isMouseNav:e,keyboardNavEnabled:a,padding:i,highlightedLink:v})=>{const m=r===d+1,u=e||r!==0||d+1>9||!a,c=[m&&"selected",e&&"hoverEffective"];return n.jsxs(f.Fragment,{children:[n.jsx(T,{className:"category",icon:t.icon,hotkey:d+1,isHotkeyHidden:u,modifiers:c,children:t.category}),n.jsxs("div",{className:`links ${e?"hoverEffective":""}`,style:{"--padding":i},children:[n.jsx("div",{className:"panel"}),t.links.map((l,s)=>{const o=!(l in E),k=v===l,y=e||r===0||s+1>9||o||!a,N=[o&&"disabled",e&&"hoverEffective",k&&"highlighted"];return n.jsx(T,{as:"a",id:l,href:E[l],className:"link",hotkey:s+1,isHotkeyHidden:y,modifiers:N,children:l},l)})]})]})},w=({hidden:t,isSearchNav:d,highlightedLink:r,highlightedCategory:e,onClearSearch:a})=>{const{selectedCategory:i,isKeyboardNav:v,isMouseNav:m,startMouseNav:u,endMouseNav:c}=b(d,a,e),l=f.useMemo(()=>{const s=window.innerHeight,o=16,k=3.5*o;return p.map((y,N)=>{const x=s/2+(N+1-p.length/2-.5)*k,g=y.links.length*k;let h;return h=x+g/2<=s-o?x-g/2:s-g-o,h<o&&(h=o),`${h}px`})},[]);return n.jsxs("nav",{className:`link-panel ${m?"hoverEffective":""}`,onMouseDown:s=>{s.preventDefault()},onMouseMove:u,onTouchStart:u,onMouseOut:c,"aria-hidden":t,"aria-expanded":v,children:[n.jsxs("div",{className:`trigger ${t&&"hidden"}`,children:[n.jsx("div",{className:"indicator"}),n.jsx(M,{className:"icon"})]}),n.jsxs("div",{className:`link-tree ${(v||i!==0)&&"expanded"}`,children:[n.jsx("div",{className:"panel"}),p.map((s,o)=>n.jsx(L,{categoryData:s,index:o,selectedCategory:i,isMouseNav:m,keyboardNavEnabled:!d,padding:l[o],highlightedLink:r},s.category))]})]})};export{w as LinkPanel};
