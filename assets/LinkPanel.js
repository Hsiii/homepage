import{r as f,l as g,a as H,j as n,B as M}from"./index.js";const L=(s,l,r)=>{const e=f.useRef(null),[a,t]=f.useState(0),[m,v]=f.useState(r);r!==m&&(v(r),t(r||0));const[u,c]=f.useState(!1),[d,i]=f.useState(!1),[o,h]=f.useState(s);return s!==o&&(h(s),s&&(c(!1),i(!1),t(0))),f.useEffect(()=>{const p=()=>{c(!1),t(0)},x=k=>{const j=k.code.slice(-1);if(!u){j==="1"&&!s&&(c(!0),i(!1));return}if(k.key==="Escape"){if(a){t(0);return}c(!1);return}if(!/^[1-9]$/.test(j))return;const w=parseInt(j);if(!(w>g.length)){if(!a){t(w);return}window.location.href=H[g[a-1].links[w-1]]}};return window.addEventListener("keydown",x),window.addEventListener("click",p),()=>{window.removeEventListener("keydown",x),window.removeEventListener("click",p),e.current&&clearTimeout(e.current)}},[u,d,a,s]),{selectedCategory:a,setSelectedCategory:t,isKeyboardNav:u,isMouseNav:d,startMouseNav:()=>{e.current&&(clearTimeout(e.current),e.current=null),i(!0),c(!1),t(0),l()},endMouseNav:()=>{e.current=setTimeout(()=>{i(!1),e.current=null},150)}}},E=({as:s="div",className:l="",children:r,icon:e,hotkey:a,isHotkeyHidden:t=!1,modifiers:m=[],...v})=>{const u=m.filter(Boolean).join(" "),c=`${l} ${u}`.trim();return n.jsxs(s,{className:c,...v,children:[e&&e,n.jsxs("code",{className:`hint ${t?"hidden":""}`,children:["[",a,"]"]}),n.jsx("span",{children:r})]})},$=({categoryData:s,index:l,selectedCategory:r,isMouseNav:e,keyboardNavEnabled:a,padding:t,highlightedLink:m})=>{const v=r===l+1,u=e||r!==0||l+1>9||!a,c=[v&&"selected",e&&"hoverEffective"];return n.jsxs(f.Fragment,{children:[n.jsx(E,{className:"category",icon:s.icon,hotkey:l+1,isHotkeyHidden:u,modifiers:c,children:s.category}),n.jsxs("div",{className:`links ${e?"hoverEffective":""}`,style:{"--padding":t},children:[n.jsx("div",{className:"panel"}),s.links.map((d,i)=>{const o=!(d in H),h=m===d,y=e||r===0||i+1>9||o||!a,N=[o&&"disabled",e&&"hoverEffective",h&&"highlighted"];return n.jsx(E,{as:"a",id:d,href:H[d],className:"link",hotkey:i+1,isHotkeyHidden:y,modifiers:N,children:d},d)})]})]})},C=({hidden:s,isSearchNav:l,highlightedLink:r,highlightedCategory:e,onClearSearch:a})=>{const{selectedCategory:t,isKeyboardNav:m,isMouseNav:v,startMouseNav:u,endMouseNav:c}=L(l,a,e),d=f.useMemo(()=>{const i=window.innerHeight,o=16,h=3.5*o;return g.map((y,N)=>{const p=i/2+(N+1-g.length/2-.5)*h,x=y.links.length*h;let k;return k=p+x/2<=i-o?p-x/2:i-x-o,k<o&&(k=o),`${k}px`})},[]);return n.jsxs("nav",{className:`link-panel ${v?"hoverEffective":""}`,onMouseMove:u,onTouchStart:u,onMouseOut:c,"aria-hidden":s,"aria-expanded":m,children:[n.jsxs("div",{className:`trigger ${s&&"hidden"}`,children:[n.jsx("div",{className:"indicator"}),n.jsx(M,{className:"icon"})]}),n.jsxs("div",{className:`link-tree ${(m||t!==0)&&"expanded"}`,children:[n.jsx("div",{className:"panel"}),g.map((i,o)=>n.jsx($,{categoryData:i,index:o,selectedCategory:t,isMouseNav:v,keyboardNavEnabled:!l,padding:d[o],highlightedLink:r},i.category))]})]})};export{C as LinkPanel};
