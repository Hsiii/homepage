import{r as c,l as T,a as j,j as t,B as b}from"./index-BdLTYQ9t.js";const M=(s,d,o)=>{const e=c.useRef(void 0),[r,n]=c.useState(0),[m,v]=c.useState(o);o!==m&&(v(o),n(o??0));const[u,l]=c.useState(!1),[i,f]=c.useState(!1),[g,a]=c.useState(s);return s!==g&&(a(s),s&&(l(!1),f(!1),n(0))),c.useEffect(()=>{const H=()=>{l(!1),n(0)},p=x=>{const h=x.code.slice(-1);if(!u){h==="1"&&!s&&(l(!0),f(!1));return}if(x.key==="Escape"){if(r>0){n(0);return}l(!1);return}if(!/^[1-9]$/.test(h))return;const N=Number.parseInt(h,10);if(!(N>T.length)){if(r===0){n(N);return}globalThis.location.href=j[T[r-1].links[N-1]]}};return globalThis.addEventListener("keydown",p),globalThis.addEventListener("click",H),()=>{globalThis.removeEventListener("keydown",p),globalThis.removeEventListener("click",H),e.current&&clearTimeout(e.current)}},[u,i,r,s]),{selectedCategory:r,setSelectedCategory:n,isKeyboardNav:u,isMouseNav:i,startMouseNav:()=>{e.current&&(clearTimeout(e.current),e.current=void 0),f(!0),l(!1),n(0),d()},endMouseNav:()=>{e.current=setTimeout(()=>{f(!1),e.current=void 0},150)}}},E=({as:s="div",className:d="",children:o,icon:e,hotkey:r,isHotkeyHidden:n=!1,modifiers:m=[],...v})=>{const u=m.filter(Boolean).join(" "),l=`${d} ${u}`.trim();return t.jsxs(s,{className:l,...v,children:[e,t.jsxs("code",{className:`hint ${n?"hidden":""}`,children:["[",r,"]"]}),t.jsx("span",{children:o})]})},L=({categoryData:s,index:d,selectedCategory:o,isMouseNav:e,keyboardNavEnabled:r,padding:n,highlightedLink:m})=>{const v=o===d+1,u=e||o!==0||d+1>9||!r,l=[v&&"selected",e&&"hoverEffective"];return t.jsxs(c.Fragment,{children:[t.jsx(E,{className:"category",icon:s.icon,hotkey:d+1,isHotkeyHidden:u,modifiers:l,children:s.category}),t.jsxs("div",{className:`links ${e?"hoverEffective":""}`,style:{"--padding":n},children:[t.jsx("div",{className:"panel"}),s.links.map((i,f)=>{const g=!(i in j),a=m===i,k=e||o===0||f+1>9||g||!r,y=[g&&"disabled",e&&"hoverEffective",a&&"highlighted"];return t.jsx(E,{as:"a",id:i,href:j[i],className:"link",hotkey:f+1,isHotkeyHidden:k,modifiers:y,children:i},i)})]})]})},$=({hidden:s,isSearchNav:d,highlightedLink:o,highlightedCategory:e,onClearSearch:r})=>{const{selectedCategory:n,isKeyboardNav:m,isMouseNav:v,startMouseNav:u,endMouseNav:l}=M(d,r,e),[i,f]=c.useState(globalThis.innerHeight);c.useEffect(()=>{const a=()=>f(globalThis.innerHeight);return globalThis.addEventListener("resize",a),()=>globalThis.removeEventListener("resize",a)},[]);const g=c.useMemo(()=>T.map((y,H)=>{const p=i/2+(H+1-T.length/2-.5)*56,x=y.links.length*56;let h;return h=p+x/2<=i-16?p-x/2:i-x-16,h<16&&(h=16),`${h}px`}),[i]);return t.jsxs("nav",{className:`link-panel ${v?"hoverEffective":""}`,onMouseDown:a=>{a.preventDefault()},onMouseMove:u,onTouchStart:u,onMouseOut:l,"aria-hidden":s,"aria-expanded":m,children:[t.jsxs("div",{className:`trigger ${s&&"hidden"}`,children:[t.jsx("div",{className:"indicator"}),t.jsx(b,{className:"icon"})]}),t.jsxs("div",{className:`link-tree ${(m||n!==0)&&"expanded"}`,children:[t.jsx("div",{className:"panel"}),T.map((a,k)=>t.jsx(L,{categoryData:a,index:k,selectedCategory:n,isMouseNav:v,keyboardNavEnabled:!d,padding:g[k],highlightedLink:o},a.category))]})]})};export{$ as LinkPanel};
