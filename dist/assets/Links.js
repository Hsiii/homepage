import{k as v,y,X as t,O as M,I as p}from"./index.js";const b=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],C=M("bookmark",b),H=n=>{const[s,i]=v.useState(0),[e,a]=v.useState(!1),[r,d]=v.useState(!0);return v.useEffect(()=>{const c=()=>{a(!1)},h=u=>{const o=u.code.slice(-1);if(!e){o==="1"&&n&&(a(!0),d(!1));return}if(r)return;if(u.key==="Escape"){if(s){i(0);return}a(!1);return}if(!/^[1-9]$/.test(o))return;const g=parseInt(o);if(!(g>y.length)){if(!s){i(g);return}window.location.href=p[y[s-1].links[g-1]]}};return window.addEventListener("keydown",h),window.addEventListener("click",c),()=>{window.removeEventListener("keydown",h),window.removeEventListener("click",c)}},[e,r,s,n]),v.useEffect(()=>{n||(a(!1),d(!1),i(0))},[n]),{selectedCategory:s,setSelectedCategory:i,isKeyboardNav:e,isMouseNav:r,startMouseNav:()=>{i(0),d(!0)},endMouseNav:()=>{r&&a(!1),d(!1)}}};function j({as:n="div",className:s="",children:i,icon:e=null,hotkey:a,isHotkeyHidden:r=!1,modifiers:d=[],...c}){const h=d.filter(Boolean).join(" "),u=`${s} ${h}`.trim();return t.jsxs(n,{className:u,...c,children:[e&&e,t.jsxs("p",{className:`hint ${r?"hidden":""}`,children:["[",a,"]"]}),t.jsx("span",{children:i})]})}function $({categoryData:n,index:s,selectedCategory:i,isMouseNav:e,keyboardNavEnabled:a,padding:r,highlightedLink:d}){const c=i===s+1,h=e||i||s+1>9||!a,u=[c&&"selected",e&&"hoverEffective"];return t.jsxs(v.Fragment,{children:[t.jsx(j,{className:"category",icon:n.icon,hotkey:s+1,isHotkeyHidden:!!h,modifiers:u,children:n.category}),t.jsxs("div",{className:`links ${e?"hoverEffective":""}`,style:{"--padding":r},children:[t.jsx("div",{className:"panel"}),n.links.map((o,g)=>{const f=!p[o],l=d===o,m=e||!i||g+1>9||f||!a,N=[f&&"disabled",e&&"hoverEffective",l&&"highlighted"];return t.jsx(j,{as:"a",id:o,href:p[o],className:"link",hotkey:g+1,isHotkeyHidden:!!m,modifiers:N,children:o},o)})]})]})}function S({hidden:n,keyboardNavEnabled:s=!0,highlightedLink:i,highlightedCategoryIdx:e,onClearSearch:a}){const{selectedCategory:r,setSelectedCategory:d,isKeyboardNav:c,isMouseNav:h,startMouseNav:u,endMouseNav:o}=H(s);v.useEffect(()=>{d(e||0)},[e,d]);const g=v.useMemo(()=>{const f=window.innerHeight,l=16,m=3.5*l;return y.map((N,E)=>{const w=f/2+(E+1-y.length/2-.5)*m,x=N.links.length*m;let k;return w+x/2<=f-l?k=w-x/2:k=f-x-l,k<l&&(k=l),k+"px"})},[window.innerHeight,y]);return t.jsxs("section",{role:"navigation",className:`link-tree ${n&&"hidden"} ${(c||r)&&"expanded"} ${h?"hoverEffective":""}`,onMouseMove:()=>{u(),a()},onMouseOut:o,"aria-hidden":n,"aria-expanded":c,children:[t.jsxs("div",{className:"trigger",children:[t.jsx("div",{className:"indicator"}),t.jsx(C,{className:"icon"})]}),t.jsx("div",{className:"panel"}),y.map((f,l)=>t.jsx($,{categoryData:f,index:l,selectedCategory:r,isMouseNav:h,keyboardNavEnabled:s,padding:g[l],highlightedLink:i},f.category))]})}export{S as default};
